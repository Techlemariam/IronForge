# üõ†Ô∏è Systemregler & Arkitektoniska Guardrails

## 1. Kodkvalitet & Senioritet
- **Produktionsklarhet:** Leverera aldrig platsh√•llare, mock-data eller "TODO"-kommentarer. All kod ska vara redo f√∂r deployment.
- **Edge Cases:** Identifiera och hantera n√§tverksfel, tomma tillst√•nd (empty states) och ogiltig input proaktivt.
- **Ingen "Yapping":** Undvik l√•nga f√∂rklaringar av grundl√§ggande koncept. G√• direkt p√• den tekniska l√∂sningen och arkitektoniska beslut.

## 2. Next.js & TypeScript Standard
- **App Router:** Anv√§nd Next.js App Router som standard. Prioritera Server Components (RSC) f√∂r datah√§mtning.
- **Client Components:** Anv√§nd endast 'use client' f√∂r interaktivitet eller n√§r React hooks kr√§vs. Flytta dessa s√• l√•ngt ner i komponenttr√§det som m√∂jligt.
- **Strikt Typing:** Anv√§nd aldrig `any`. Definiera exakta interfaces. Anv√§nd `satisfies` f√∂r b√§ttre typ-inferens d√§r l√§mpligt.
- **Zod-validering:** All extern data (API-anrop, formul√§r, milj√∂variabler) SKA valideras med Zod-scheman.

## 3. Arkitektur & M√∂nster
- **Separation of Concerns:** H√•ll aff√§rslogik separerad fr√•n UI-komponenter. Anv√§nd "Service Layer" eller dedikerade "Actions" f√∂r komplex logik.
- **Dependency Injection:** Designa kod f√∂r testbarhet. Undvik h√•rdkodade globala beroenden.
- **Pragmatisk Clean Architecture:** F√∂lj principerna men undvik √∂verabstraktion som √∂kar kognitiv belastning.

## 4. Databas & State (PostgreSQL + Prisma/Drizzle)
- **Typ-synkronisering:** Utg√• alltid fr√•n databasschemat som "Source of Truth".
- **Prestanda:** Minimera antalet DB-anrop. Anv√§nd joins ist√§llet f√∂r multipla queries d√§r det √§r effektivare.
- **S√§kerhet:** SQL-injektion ska vara om√∂jligt genom anv√§ndning av ORM eller parametriserade queries.

## 5. Felhantering (The "Parent-Proof" Standard)
- **Robusthet:** Eftersom min tid √§r begr√§nsad f√•r koden inte kr√§va manuell debugging av triviala fel.
- **Error Boundaries:** Implementera felhantering p√• komponentniv√•.
- **Loggning:** Inkludera strukturerad loggning (`try/catch` med kontextuell info) som underl√§ttar asynkron fels√∂kning.

## 6. Testning & Verifiering
- **Test-First:** Vid buggfixar, generera f√∂rst ett misslyckat test (Vitest eller Playwright).
- **Automatisering:** Skriv tester som kan k√∂ras autonomt i Antigravitys terminal/browser-milj√∂.

## 7. Kommunikation & Workflow
- **Beslutslogik:** Vid arkitektoniska val, presentera kort f√∂r- och nackdelar (Trade-offs).
- **Artifacts:** Anv√§nd Artifacts f√∂r st√∂rre kodblock, arkitekturdiagram (Mermaid) och implementeringsplaner.
- **Iterativ utveckling:** Bryt ner stora uppgifter i mindre, verifierbara steg som kan godk√§nnas ett i taget.