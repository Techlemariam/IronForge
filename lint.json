
> ironforge-rpg@1.0.0 lint
> next lint --format json

[{"filePath":"C:\\Users\\alexa\\Workspaces\\IronForge\\src\\app\\iron-arena\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":23,"column":63,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1017,1070],"text":"Prove your Titan&apos;s dominance in 7-day training duels."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1017,1070],"text":"Prove your Titan&lsquo;s dominance in 7-day training duels."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1017,1070],"text":"Prove your Titan&#39;s dominance in 7-day training duels."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1017,1070],"text":"Prove your Titan&rsquo;s dominance in 7-day training duels."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getDuelStatusAction } from '@/actions/duel';\r\nimport { DuelCard } from '@/components/duel/DuelCard';\r\nimport { ChallengeModal } from '@/components/duel/ChallengeModal';\r\nimport { getSession } from '@/lib/auth'; // Ensure this path is correct\r\nimport { ArenaClient } from './ArenaClient';\r\n\r\nexport default async function IronArenaPage() {\r\n    const session = await getSession();\r\n    if (!session?.user) {\r\n        return <div>Please login to access the Iron Arena.</div>;\r\n    }\r\n\r\n    const duelStatus = await getDuelStatusAction();\r\n    const activeDuel = duelStatus.success ? duelStatus.duel : null;\r\n    // pending is available in duelStatus.pending if needed\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-4 space-y-6\">\r\n            <header className=\"mb-8\">\r\n                <h1 className=\"text-3xl font-bold bg-gradient-to-r from-amber-500 to-red-600 bg-clip-text text-transparent\">\r\n                    Iron Arena\r\n                </h1>\r\n                <p className=\"text-slate-400\">Prove your Titan's dominance in 7-day training duels.</p>\r\n            </header>\r\n\r\n            <ArenaClient\r\n                activeDuel={activeDuel}\r\n                currentUserId={session.user.id}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alexa\\Workspaces\\IronForge\\src\\components\\gamification\\OvertrainingBanner.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkStatus'. Either include it or remove the dependency array.","line":20,"column":8,"nodeType":"ArrayExpression","endLine":20,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [checkStatus, userId]","fix":{"range":[673,681],"text":"[checkStatus, userId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { AlertTriangle, Battery, Clock, X } from 'lucide-react';\r\nimport { checkOvertrainingStatusAction } from '@/actions/overtraining';\r\n\r\ninterface OvertrainingBannerProps {\r\n    userId: string;\r\n    onDismiss?: () => void;\r\n}\r\n\r\nexport function OvertrainingBanner({ userId, onDismiss }: OvertrainingBannerProps) {\r\n    const [warnings, setWarnings] = useState<string[]>([]);\r\n    const [xpMultiplier, setXpMultiplier] = useState(1.0);\r\n    const [dismissed, setDismissed] = useState(false);\r\n\r\n    useEffect(() => {\r\n        checkStatus();\r\n    }, [userId]);\r\n\r\n    const checkStatus = async () => {\r\n        const status = await checkOvertrainingStatusAction(userId);\r\n        setWarnings(status.warnings);\r\n        setXpMultiplier(status.xpMultiplier);\r\n    };\r\n\r\n    const handleDismiss = () => {\r\n        setDismissed(true);\r\n        onDismiss?.();\r\n    };\r\n\r\n    if (dismissed || warnings.length === 0) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0, y: -20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -20 }}\r\n                className=\"relative bg-gradient-to-r from-amber-950/80 to-red-950/80 border border-amber-600/50 rounded-lg p-4 mb-4\"\r\n            >\r\n                <button\r\n                    onClick={handleDismiss}\r\n                    className=\"absolute top-2 right-2 text-slate-400 hover:text-white\"\r\n                >\r\n                    <X className=\"w-4 h-4\" />\r\n                </button>\r\n\r\n                <div className=\"flex items-start gap-3\">\r\n                    <div className=\"flex-shrink-0 w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center\">\r\n                        <AlertTriangle className=\"w-5 h-5 text-amber-400\" />\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 min-w-0\">\r\n                        <h3 className=\"font-bold text-amber-400 text-sm flex items-center gap-2\">\r\n                            Recovery Alert\r\n                            {xpMultiplier < 1 && (\r\n                                <span className=\"text-xs bg-red-900/50 px-2 py-0.5 rounded-full\">\r\n                                    {Math.round(xpMultiplier * 100)}% XP\r\n                                </span>\r\n                            )}\r\n                        </h3>\r\n\r\n                        <ul className=\"mt-2 space-y-1\">\r\n                            {warnings.map((warning, i) => (\r\n                                <li key={i} className=\"text-xs text-slate-300 flex items-start gap-2\">\r\n                                    <span className=\"text-amber-500 mt-0.5\">ÔÇó</span>\r\n                                    {warning}\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alexa\\Workspaces\\IronForge\\src\\components\\gamification\\StreakBadge.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchStreak'. Either include it or remove the dependency array.","line":21,"column":8,"nodeType":"ArrayExpression","endLine":21,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchStreak, userId]","fix":{"range":[636,644],"text":"[fetchStreak, userId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Flame, AlertTriangle } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { cn } from '@/lib/utils';\r\nimport { getStreakStatusAction } from '@/actions/streak';\r\n\r\ninterface StreakBadgeProps {\r\n    userId: string;\r\n    compact?: boolean;\r\n}\r\n\r\nexport function StreakBadge({ userId, compact = false }: StreakBadgeProps) {\r\n    const [streak, setStreak] = useState(0);\r\n    const [isAtRisk, setIsAtRisk] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchStreak();\r\n    }, [userId]);\r\n\r\n    const fetchStreak = async () => {\r\n        const result = await getStreakStatusAction(userId);\r\n        if (result.success) {\r\n            setStreak(result.currentStreak);\r\n            setIsAtRisk(result.isAtRisk);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    if (loading || streak === 0) return null;\r\n\r\n    if (compact) {\r\n        return (\r\n            <div className={cn(\r\n                \"flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold\",\r\n                isAtRisk\r\n                    ? \"bg-red-900/30 text-red-400 border border-red-600/50 animate-pulse\"\r\n                    : \"bg-orange-900/30 text-orange-400 border border-orange-600/50\"\r\n            )}>\r\n                <Flame className=\"w-3 h-3\" />\r\n                <span>{streak}</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ scale: 0.9, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            className={cn(\r\n                \"relative flex items-center gap-2 px-4 py-2 rounded-xl border\",\r\n                isAtRisk\r\n                    ? \"bg-red-950/40 border-red-600/50\"\r\n                    : \"bg-orange-950/40 border-orange-600/50\"\r\n            )}\r\n        >\r\n            {/* Fire animation */}\r\n            <motion.div\r\n                animate={{\r\n                    y: [0, -2, 0],\r\n                    scale: [1, 1.1, 1],\r\n                }}\r\n                transition={{\r\n                    repeat: Infinity,\r\n                    duration: 0.8,\r\n                    ease: \"easeInOut\"\r\n                }}\r\n            >\r\n                <Flame className={cn(\r\n                    \"w-6 h-6\",\r\n                    isAtRisk ? \"text-red-500\" : \"text-orange-500\"\r\n                )} />\r\n            </motion.div>\r\n\r\n            <div className=\"flex flex-col\">\r\n                <span className={cn(\r\n                    \"text-2xl font-black leading-none\",\r\n                    isAtRisk ? \"text-red-400\" : \"text-orange-400\"\r\n                )}>\r\n                    {streak}\r\n                </span>\r\n                <span className=\"text-[10px] uppercase tracking-widest text-slate-500\">\r\n                    Day Streak\r\n                </span>\r\n            </div>\r\n\r\n            {/* At risk indicator */}\r\n            <AnimatePresence>\r\n                {isAtRisk && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, x: 10 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        exit={{ opacity: 0, x: 10 }}\r\n                        className=\"absolute -right-2 -top-2\"\r\n                    >\r\n                        <div className=\"flex items-center gap-1 px-2 py-0.5 bg-red-600 rounded-full text-[10px] font-bold text-white animate-pulse\">\r\n                            <AlertTriangle className=\"w-3 h-3\" />\r\n                            AT RISK\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alexa\\Workspaces\\IronForge\\src\\components\\oracle\\RecoveryOracleVerdict.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'calculateVerdict'. Either include it or remove the dependency array.","line":65,"column":8,"nodeType":"ArrayExpression","endLine":65,"endColumn":42,"suggestions":[{"desc":"Update the dependencies array to be: [userId, wellnesScore, sleepScore, calculateVerdict]","fix":{"range":[1927,1961],"text":"[userId, wellnesScore, sleepScore, calculateVerdict]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Flame, Moon, Zap, Loader2 } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { checkOvertrainingStatusAction } from '@/actions/overtraining';\r\nimport { getStreakStatusAction } from '@/actions/streak';\r\n\r\ntype Verdict = 'TRAIN' | 'REST' | 'LIGHT';\r\n\r\ninterface VerdictConfig {\r\n    verdict: Verdict;\r\n    label: string;\r\n    description: string;\r\n    icon: React.ReactNode;\r\n    color: string;\r\n    bgColor: string;\r\n}\r\n\r\nconst VERDICT_CONFIGS: Record<Verdict, VerdictConfig> = {\r\n    TRAIN: {\r\n        verdict: 'TRAIN',\r\n        label: 'GO HARD',\r\n        description: 'Your body is ready. Push your limits today.',\r\n        icon: <Flame className=\"w-8 h-8\" />,\r\n        color: 'text-green-400',\r\n        bgColor: 'from-green-950/50 to-green-900/20',\r\n    },\r\n    REST: {\r\n        verdict: 'REST',\r\n        label: 'RECOVER',\r\n        description: 'Your Titan needs rest. Take the day off.',\r\n        icon: <Moon className=\"w-8 h-8\" />,\r\n        color: 'text-blue-400',\r\n        bgColor: 'from-blue-950/50 to-blue-900/20',\r\n    },\r\n    LIGHT: {\r\n        verdict: 'LIGHT',\r\n        label: 'EASY DAY',\r\n        description: 'Light activity recommended. Maintain momentum.',\r\n        icon: <Zap className=\"w-8 h-8\" />,\r\n        color: 'text-amber-400',\r\n        bgColor: 'from-amber-950/50 to-amber-900/20',\r\n    },\r\n};\r\n\r\ninterface RecoveryOracleVerdictProps {\r\n    userId: string;\r\n    wellnesScore?: number;\r\n    sleepScore?: number;\r\n}\r\n\r\nexport function RecoveryOracleVerdict({\r\n    userId,\r\n    wellnesScore = 75,\r\n    sleepScore = 80\r\n}: RecoveryOracleVerdictProps) {\r\n    const [verdict, setVerdict] = useState<Verdict | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [xpBonus, setXpBonus] = useState(0);\r\n\r\n    useEffect(() => {\r\n        calculateVerdict();\r\n    }, [userId, wellnesScore, sleepScore]);\r\n\r\n    const calculateVerdict = async () => {\r\n        setLoading(true);\r\n\r\n        try {\r\n            const [overtraining, streak] = await Promise.all([\r\n                checkOvertrainingStatusAction(userId),\r\n                getStreakStatusAction(userId),\r\n            ]);\r\n\r\n            // Decision logic\r\n            let calculatedVerdict: Verdict = 'TRAIN';\r\n            let bonus = 0;\r\n\r\n            // Check fatigue/overtraining\r\n            if (overtraining.isCapped || overtraining.isFatigued) {\r\n                calculatedVerdict = 'REST';\r\n            } else if (overtraining.xpMultiplier < 0.75) {\r\n                calculatedVerdict = 'LIGHT';\r\n            }\r\n\r\n            // Check wellness (if available)\r\n            if (wellnesScore < 50 || sleepScore < 50) {\r\n                calculatedVerdict = 'REST';\r\n            } else if (wellnesScore < 70 || sleepScore < 65) {\r\n                calculatedVerdict = calculatedVerdict === 'TRAIN' ? 'LIGHT' : calculatedVerdict;\r\n            }\r\n\r\n            // Calculate XP bonus for optimal training\r\n            if (calculatedVerdict === 'TRAIN') {\r\n                if (sleepScore >= 85) bonus += 20;\r\n                if (wellnesScore >= 85) bonus += 20;\r\n                if (streak.currentStreak >= 7) bonus += 10;\r\n            }\r\n\r\n            setVerdict(calculatedVerdict);\r\n            setXpBonus(bonus);\r\n        } catch (error) {\r\n            console.error('Error calculating verdict:', error);\r\n            setVerdict('TRAIN');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center p-8\">\r\n                <Loader2 className=\"w-8 h-8 animate-spin text-slate-500\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!verdict) return null;\r\n\r\n    const config = VERDICT_CONFIGS[verdict];\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, scale: 0.95 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            className={cn(\r\n                \"relative overflow-hidden rounded-xl border p-6\",\r\n                `bg-gradient-to-br ${config.bgColor} border-slate-800`\r\n            )}\r\n        >\r\n            {/* Glow effect */}\r\n            <div className={cn(\r\n                \"absolute inset-0 opacity-20 blur-2xl\",\r\n                config.color.replace('text-', 'bg-')\r\n            )} />\r\n\r\n            <div className=\"relative z-10 flex items-center gap-4\">\r\n                <div className={cn(\r\n                    \"flex-shrink-0 w-16 h-16 rounded-xl flex items-center justify-center\",\r\n                    config.color.replace('text-', 'bg-').replace('-400', '-900/50')\r\n                )}>\r\n                    <div className={config.color}>\r\n                        {config.icon}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <h2 className={`text-2xl font-black ${config.color}`}>\r\n                            {config.label}\r\n                        </h2>\r\n                        {xpBonus > 0 && (\r\n                            <span className=\"text-xs bg-green-900/50 text-green-400 px-2 py-0.5 rounded-full\">\r\n                                +{xpBonus}% XP\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                    <p className=\"text-sm text-slate-400 mt-1\">{config.description}</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"relative z-10 mt-4 pt-4 border-t border-slate-800/50 text-xs text-slate-500\">\r\n                Oracle Verdict based on recovery metrics, training history, and wellness data.\r\n            </div>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alexa\\Workspaces\\IronForge\\src\\hooks\\useOfflineMode.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'pendingActions.length' and 'syncPendingActions'. Either include them or remove the dependency array.","line":60,"column":8,"nodeType":"ArrayExpression","endLine":60,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [isOnline, pendingActions.length, syncPendingActions]","fix":{"range":[1821,1831],"text":"[isOnline, pendingActions.length, syncPendingActions]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\n\r\ninterface OfflineAction {\r\n    id: string;\r\n    type: 'LOG_SET' | 'LOG_CARDIO' | 'COMPLETE_WORKOUT' | 'UPDATE_NOTE';\r\n    payload: unknown;\r\n    timestamp: Date;\r\n    synced: boolean;\r\n}\r\n\r\ninterface OfflineState {\r\n    isOnline: boolean;\r\n    pendingActions: number;\r\n    lastSyncTime: Date | null;\r\n}\r\n\r\nconst OFFLINE_STORAGE_KEY = 'ironforge_offline_queue';\r\n\r\n/**\r\n * Hook for offline mode support.\r\n */\r\nexport function useOfflineMode() {\r\n    const [isOnline, setIsOnline] = useState(true);\r\n    const [pendingActions, setPendingActions] = useState<OfflineAction[]>([]);\r\n    const [lastSyncTime, setLastSyncTime] = useState<Date | null>(null);\r\n\r\n    // Monitor online status\r\n    useEffect(() => {\r\n        const handleOnline = () => setIsOnline(true);\r\n        const handleOffline = () => setIsOnline(false);\r\n\r\n        setIsOnline(navigator.onLine);\r\n        window.addEventListener('online', handleOnline);\r\n        window.addEventListener('offline', handleOffline);\r\n\r\n        // Load pending actions from storage\r\n        const stored = localStorage.getItem(OFFLINE_STORAGE_KEY);\r\n        if (stored) {\r\n            try {\r\n                const actions = JSON.parse(stored) as OfflineAction[];\r\n                setPendingActions(actions.filter(a => !a.synced));\r\n            } catch (e) {\r\n                console.error('Error loading offline queue:', e);\r\n            }\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('online', handleOnline);\r\n            window.removeEventListener('offline', handleOffline);\r\n        };\r\n    }, []);\r\n\r\n    // Sync when coming online\r\n    useEffect(() => {\r\n        if (isOnline && pendingActions.length > 0) {\r\n            syncPendingActions();\r\n        }\r\n    }, [isOnline]);\r\n\r\n    const queueAction = useCallback((type: OfflineAction['type'], payload: unknown) => {\r\n        const action: OfflineAction = {\r\n            id: `offline-${Date.now()}-${Math.random().toString(36).slice(2)}`,\r\n            type,\r\n            payload,\r\n            timestamp: new Date(),\r\n            synced: false,\r\n        };\r\n\r\n        setPendingActions(prev => {\r\n            const updated = [...prev, action];\r\n            localStorage.setItem(OFFLINE_STORAGE_KEY, JSON.stringify(updated));\r\n            return updated;\r\n        });\r\n\r\n        return action.id;\r\n    }, []);\r\n\r\n    const syncPendingActions = useCallback(async () => {\r\n        if (!isOnline || pendingActions.length === 0) return;\r\n\r\n        console.log(`Syncing ${pendingActions.length} offline actions...`);\r\n\r\n        for (const action of pendingActions) {\r\n            try {\r\n                // In production, send to server\r\n                console.log(`Syncing action ${action.id}: ${action.type}`);\r\n                action.synced = true;\r\n            } catch (error) {\r\n                console.error(`Failed to sync action ${action.id}:`, error);\r\n            }\r\n        }\r\n\r\n        const synced = pendingActions.filter(a => a.synced);\r\n        const remaining = pendingActions.filter(a => !a.synced);\r\n\r\n        setPendingActions(remaining);\r\n        localStorage.setItem(OFFLINE_STORAGE_KEY, JSON.stringify(remaining));\r\n        setLastSyncTime(new Date());\r\n\r\n        console.log(`Synced ${synced.length} actions, ${remaining.length} remaining`);\r\n    }, [isOnline, pendingActions]);\r\n\r\n    const clearQueue = useCallback(() => {\r\n        setPendingActions([]);\r\n        localStorage.removeItem(OFFLINE_STORAGE_KEY);\r\n    }, []);\r\n\r\n    const getOfflineState = useCallback((): OfflineState => ({\r\n        isOnline,\r\n        pendingActions: pendingActions.length,\r\n        lastSyncTime,\r\n    }), [isOnline, pendingActions.length, lastSyncTime]);\r\n\r\n    return {\r\n        isOnline,\r\n        pendingActions: pendingActions.length,\r\n        lastSyncTime,\r\n        queueAction,\r\n        syncPendingActions,\r\n        clearQueue,\r\n        getOfflineState,\r\n    };\r\n}\r\n\r\n/**\r\n * Offline-aware set logger.\r\n */\r\nexport function logSetOffline(\r\n    queueAction: (type: OfflineAction['type'], payload: unknown) => string,\r\n    exerciseId: string,\r\n    weight: number,\r\n    reps: number,\r\n    setNumber: number\r\n): string {\r\n    return queueAction('LOG_SET', { exerciseId, weight, reps, setNumber, date: new Date().toISOString() });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alexa\\Workspaces\\IronForge\\src\\hooks\\useOnboardingTour.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'completeTour'. Either include it or remove the dependency array.","line":104,"column":8,"nodeType":"ArrayExpression","endLine":104,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [completeTour, currentStep, tourConfig.steps.length]","fix":{"range":[3221,3259],"text":"[completeTour, currentStep, tourConfig.steps.length]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\n\r\ninterface TourStep {\r\n    id: string;\r\n    target: string; // CSS selector\r\n    title: string;\r\n    content: string;\r\n    placement: 'top' | 'bottom' | 'left' | 'right';\r\n    action?: () => void;\r\n    requiredAction?: string;\r\n}\r\n\r\ninterface TourConfig {\r\n    id: string;\r\n    name: string;\r\n    steps: TourStep[];\r\n    onComplete?: () => void;\r\n}\r\n\r\nconst MAIN_TOUR: TourConfig = {\r\n    id: 'main-onboarding',\r\n    name: 'Welcome to IronForge!',\r\n    steps: [\r\n        {\r\n            id: 'welcome',\r\n            target: '[data-tour=\"dashboard\"]',\r\n            title: 'Welcome, Titan!',\r\n            content: 'This is your command center. Here you can see your progress, quests, and Titan status.',\r\n            placement: 'bottom',\r\n        },\r\n        {\r\n            id: 'titan-status',\r\n            target: '[data-tour=\"titan-card\"]',\r\n            title: 'Your Titan',\r\n            content: 'This is your Titan avatar. It grows stronger as you train in the real world!',\r\n            placement: 'right',\r\n        },\r\n        {\r\n            id: 'workout',\r\n            target: '[data-tour=\"start-workout\"]',\r\n            title: 'Start Training',\r\n            content: 'Tap here to begin logging your workout. Every set earns XP for your Titan.',\r\n            placement: 'bottom',\r\n        },\r\n        {\r\n            id: 'combat',\r\n            target: '[data-tour=\"combat\"]',\r\n            title: 'Enter Combat',\r\n            content: 'Fight monsters and bosses in the Iron Mines. Your fitness data powers your attacks!',\r\n            placement: 'left',\r\n        },\r\n        {\r\n            id: 'quests',\r\n            target: '[data-tour=\"quests\"]',\r\n            title: 'Daily Quests',\r\n            content: 'Complete daily quests for bonus XP and rewards. New quests appear every day!',\r\n            placement: 'top',\r\n        },\r\n        {\r\n            id: 'guild',\r\n            target: '[data-tour=\"guild\"]',\r\n            title: 'Join a Guild',\r\n            content: 'Team up with other Titans for group challenges and shared rewards.',\r\n            placement: 'right',\r\n        },\r\n    ],\r\n};\r\n\r\nconst STORAGE_KEY = 'ironforge_completed_tours';\r\n\r\n/**\r\n * Hook for managing onboarding tours.\r\n */\r\nexport function useOnboardingTour(tourConfig: TourConfig = MAIN_TOUR) {\r\n    const [isActive, setIsActive] = useState(false);\r\n    const [currentStep, setCurrentStep] = useState(0);\r\n    const [completedTours, setCompletedTours] = useState<string[]>([]);\r\n\r\n    useEffect(() => {\r\n        // Load completed tours from storage\r\n        const stored = localStorage.getItem(STORAGE_KEY);\r\n        if (stored) {\r\n            try {\r\n                setCompletedTours(JSON.parse(stored));\r\n            } catch (e) {\r\n                console.error('Error loading tour state:', e);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    const startTour = useCallback(() => {\r\n        setCurrentStep(0);\r\n        setIsActive(true);\r\n    }, []);\r\n\r\n    const nextStep = useCallback(() => {\r\n        if (currentStep < tourConfig.steps.length - 1) {\r\n            setCurrentStep(prev => prev + 1);\r\n        } else {\r\n            completeTour();\r\n        }\r\n    }, [currentStep, tourConfig.steps.length]);\r\n\r\n    const prevStep = useCallback(() => {\r\n        if (currentStep > 0) {\r\n            setCurrentStep(prev => prev - 1);\r\n        }\r\n    }, [currentStep]);\r\n\r\n    const skipTour = useCallback(() => {\r\n        setIsActive(false);\r\n        setCurrentStep(0);\r\n    }, []);\r\n\r\n    const completeTour = useCallback(() => {\r\n        setIsActive(false);\r\n        setCurrentStep(0);\r\n\r\n        const updated = [...completedTours, tourConfig.id];\r\n        setCompletedTours(updated);\r\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(updated));\r\n\r\n        tourConfig.onComplete?.();\r\n    }, [completedTours, tourConfig]);\r\n\r\n    const isTourCompleted = useCallback((tourId: string) => {\r\n        return completedTours.includes(tourId);\r\n    }, [completedTours]);\r\n\r\n    const resetTours = useCallback(() => {\r\n        setCompletedTours([]);\r\n        localStorage.removeItem(STORAGE_KEY);\r\n    }, []);\r\n\r\n    const shouldShowTour = !completedTours.includes(tourConfig.id);\r\n    const currentStepData = tourConfig.steps[currentStep];\r\n    const totalSteps = tourConfig.steps.length;\r\n    const progress = ((currentStep + 1) / totalSteps) * 100;\r\n\r\n    return {\r\n        isActive,\r\n        currentStep,\r\n        currentStepData,\r\n        totalSteps,\r\n        progress,\r\n        shouldShowTour,\r\n        startTour,\r\n        nextStep,\r\n        prevStep,\r\n        skipTour,\r\n        completeTour,\r\n        isTourCompleted,\r\n        resetTours,\r\n    };\r\n}\r\n\r\n/**\r\n * Get available tours.\r\n */\r\nexport function getAvailableTours(): TourConfig[] {\r\n    return [MAIN_TOUR];\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alexa\\Workspaces\\IronForge\\src\\hooks\\useVoiceCommands.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'parseCommand'. Either include it or remove the dependency array.","line":112,"column":8,"nodeType":"ArrayExpression","endLine":112,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [onCommand, parseCommand]","fix":{"range":[3531,3542],"text":"[onCommand, parseCommand]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useCallback, useEffect, useRef } from 'react';\r\n\r\ntype VoiceCommand = {\r\n    pattern: RegExp;\r\n    action: string;\r\n    extract: (match: RegExpMatchArray) => Record<string, number | string>;\r\n};\r\n\r\ninterface VoiceCommandResult {\r\n    action: string;\r\n    params: Record<string, number | string>;\r\n    transcript: string;\r\n    confidence: number;\r\n}\r\n\r\nconst VOICE_COMMANDS: VoiceCommand[] = [\r\n    // \"log 100 kg for 5 reps\" or \"100 kilos 5 reps\"\r\n    {\r\n        pattern: /(\\d+)\\s*(kg|kilos?|pounds?|lbs?)?\\s*(for|x|times)?\\s*(\\d+)\\s*(reps?)?/i,\r\n        action: 'LOG_SET',\r\n        extract: (m) => ({ weight: parseInt(m[1]), reps: parseInt(m[4]) }),\r\n    },\r\n    // \"5 reps at 100 kg\"\r\n    {\r\n        pattern: /(\\d+)\\s*reps?\\s*(at|with)?\\s*(\\d+)\\s*(kg|kilos?)?/i,\r\n        action: 'LOG_SET',\r\n        extract: (m) => ({ reps: parseInt(m[1]), weight: parseInt(m[3]) }),\r\n    },\r\n    // \"rest\" or \"start rest\"\r\n    {\r\n        pattern: /^(start\\s*)?rest$/i,\r\n        action: 'START_REST',\r\n        extract: () => ({}),\r\n    },\r\n    // \"rest 90\" or \"rest 2 minutes\"\r\n    {\r\n        pattern: /rest\\s*(\\d+)\\s*(seconds?|secs?|minutes?|mins?)?/i,\r\n        action: 'START_REST',\r\n        extract: (m) => {\r\n            const value = parseInt(m[1]);\r\n            const isMinutes = m[2]?.startsWith('min');\r\n            return { seconds: isMinutes ? value * 60 : value };\r\n        },\r\n    },\r\n    // \"next exercise\"\r\n    {\r\n        pattern: /^next\\s*(exercise|set)?$/i,\r\n        action: 'NEXT_EXERCISE',\r\n        extract: () => ({}),\r\n    },\r\n    // \"finish\" or \"complete workout\"\r\n    {\r\n        pattern: /^(finish|complete|end)\\s*(workout)?$/i,\r\n        action: 'FINISH_WORKOUT',\r\n        extract: () => ({}),\r\n    },\r\n];\r\n\r\n/**\r\n * Check if speech recognition is available.\r\n */\r\nexport function isSpeechRecognitionAvailable(): boolean {\r\n    return typeof window !== 'undefined' &&\r\n        ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window);\r\n}\r\n\r\n/**\r\n * Hook for voice commands.\r\n */\r\nexport function useVoiceCommands(onCommand?: (result: VoiceCommandResult) => void) {\r\n    const [isListening, setIsListening] = useState(false);\r\n    const [transcript, setTranscript] = useState('');\r\n    const [error, setError] = useState<string | null>(null);\r\n    const recognitionRef = useRef<SpeechRecognition | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!isSpeechRecognitionAvailable()) return;\r\n\r\n        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n        recognitionRef.current = new SpeechRecognition();\r\n        recognitionRef.current.continuous = false;\r\n        recognitionRef.current.interimResults = true;\r\n        recognitionRef.current.lang = 'en-US';\r\n\r\n        recognitionRef.current.onresult = (event) => {\r\n            const last = event.results[event.results.length - 1];\r\n            const text = last[0].transcript;\r\n            setTranscript(text);\r\n\r\n            if (last.isFinal) {\r\n                const result = parseCommand(text, last[0].confidence);\r\n                if (result && onCommand) {\r\n                    onCommand(result);\r\n                }\r\n            }\r\n        };\r\n\r\n        recognitionRef.current.onerror = (event) => {\r\n            setError(event.error);\r\n            setIsListening(false);\r\n        };\r\n\r\n        recognitionRef.current.onend = () => {\r\n            setIsListening(false);\r\n        };\r\n\r\n        return () => {\r\n            recognitionRef.current?.abort();\r\n        };\r\n    }, [onCommand]);\r\n\r\n    const parseCommand = useCallback((text: string, confidence: number): VoiceCommandResult | null => {\r\n        for (const cmd of VOICE_COMMANDS) {\r\n            const match = text.match(cmd.pattern);\r\n            if (match) {\r\n                return {\r\n                    action: cmd.action,\r\n                    params: cmd.extract(match),\r\n                    transcript: text,\r\n                    confidence,\r\n                };\r\n            }\r\n        }\r\n        return null;\r\n    }, []);\r\n\r\n    const startListening = useCallback(() => {\r\n        if (!recognitionRef.current) return;\r\n        setError(null);\r\n        setTranscript('');\r\n        recognitionRef.current.start();\r\n        setIsListening(true);\r\n    }, []);\r\n\r\n    const stopListening = useCallback(() => {\r\n        recognitionRef.current?.stop();\r\n        setIsListening(false);\r\n    }, []);\r\n\r\n    return {\r\n        isAvailable: isSpeechRecognitionAvailable(),\r\n        isListening,\r\n        transcript,\r\n        error,\r\n        startListening,\r\n        stopListening,\r\n    };\r\n}\r\n\r\n// Add type declarations for Web Speech API\r\ndeclare global {\r\n    interface Window {\r\n        SpeechRecognition: typeof SpeechRecognition;\r\n        webkitSpeechRecognition: typeof SpeechRecognition;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]}]

info  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/app/api-reference/config/eslint#disabling-rules
