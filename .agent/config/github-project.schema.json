{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://ironforge.app/schemas/github-project.json",
    "title": "GitHub Project Configuration",
    "description": "Schema for IronForge GitHub Project V2 field IDs",
    "type": "object",
    "required": [
        "projectId",
        "projectNumber",
        "owner",
        "fields"
    ],
    "properties": {
        "projectId": {
            "type": "string",
            "description": "GitHub Project V2 ID (starts with PVT_)",
            "pattern": "^PVT_[a-zA-Z0-9]+$"
        },
        "projectNumber": {
            "type": "integer",
            "description": "Project number as shown in URL",
            "minimum": 1
        },
        "owner": {
            "type": "string",
            "description": "GitHub username or organization that owns the project"
        },
        "fields": {
            "type": "object",
            "description": "Project field configurations",
            "required": [
                "status"
            ],
            "properties": {
                "status": {
                    "$ref": "#/$defs/singleSelectField",
                    "description": "Status field (required for all projects)"
                },
                "priority": {
                    "$ref": "#/$defs/singleSelectField",
                    "description": "Priority field"
                },
                "effort": {
                    "$ref": "#/$defs/singleSelectField",
                    "description": "Effort estimation field"
                },
                "domain": {
                    "$ref": "#/$defs/singleSelectField",
                    "description": "Domain/category field"
                },
                "roi": {
                    "$ref": "#/$defs/numberField",
                    "description": "ROI numeric field"
                }
            },
            "additionalProperties": {
                "oneOf": [
                    {
                        "$ref": "#/$defs/singleSelectField"
                    },
                    {
                        "$ref": "#/$defs/numberField"
                    },
                    {
                        "$ref": "#/$defs/textField"
                    }
                ]
            }
        }
    },
    "$defs": {
        "singleSelectField": {
            "type": "object",
            "required": [
                "id",
                "options"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Field ID (starts with PVTSSF_)",
                    "pattern": "^PVTSSF_[a-zA-Z0-9]+$"
                },
                "options": {
                    "type": "object",
                    "description": "Option name -> Option ID mapping",
                    "additionalProperties": {
                        "type": "string",
                        "pattern": "^[a-f0-9]{8}$"
                    }
                }
            }
        },
        "numberField": {
            "type": "object",
            "required": [
                "id"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Field ID (starts with PVTF_)",
                    "pattern": "^PVTF_[a-zA-Z0-9]+$"
                }
            }
        },
        "textField": {
            "type": "object",
            "required": [
                "id"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Field ID"
                }
            }
        }
    }
}